---
format: 
  html:
    theme: default
    toc: false
---

```{=html}
<div style="text-align: center; padding: 20px; font-family: Arial;">
    <h2>üìã Survey Access</h2>
    <p id="message">Preparing your survey...</p>
    
    <script>
        // Enhanced detection based on StackOverflow solution
        var standalone = window.navigator.standalone,
            userAgent = window.navigator.userAgent.toLowerCase(),
            safari = /safari/.test(userAgent),
            ios = /iphone|ipod|ipad/.test(userAgent);
        
        // Additional comprehensive detection
        const isInAppBrowser = 
            // iOS detection
            (ios && !standalone && safari) ||  // Safari in-app
            (ios && !standalone && !safari) || // iOS webview
            // Android detection
            userAgent.includes('wv') ||        // Android webview
            // App-specific detection
            /fban|fbav/.test(userAgent) ||     // Facebook
            /instagram/.test(userAgent) ||      // Instagram
            /twitter/.test(userAgent) ||        // Twitter
            /linkedin/.test(userAgent) ||       // LinkedIn
            /slack/.test(userAgent) ||          // Slack
            /outlook/.test(userAgent) ||        // Outlook
            /gmail/.test(userAgent) ||          // Gmail
            /yahoomail/.test(userAgent) ||      // Yahoo Mail
            /spark/.test(userAgent) ||          // Spark email
            /edison/.test(userAgent) ||         // Edison Mail
            /newton/.test(userAgent);           // Newton Mail
        
        let instructions = `<p><strong>For the best survey experience, please open this in your browser app:</strong></p>`;
        
        if (isInAppBrowser) {
            instructions += `
                <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin: 20px 0; border-radius: 5px;">
                    <strong>‚ö†Ô∏è You're in an in-app browser</strong><br><br>
                    <strong>To open in your full browser:</strong><br>
                    1. Look for ‚ãØ or Share button<br>
                    2. Select "Open in Browser" or "Open in Safari/Chrome"<br>
                    3. Or copy the link below and paste it in your browser app
                </div>`;
        } else {
            instructions += `
                <div style="background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; margin: 20px 0; border-radius: 5px;">
                    <strong>‚úÖ You're in a full browser - great!</strong><br>
                    Click the button below to access the survey.
                </div>`;
        }
        
        instructions += `
            <a href="https://cornell.ca1.qualtrics.com/jfe/form/SV_5cqnAHFvK4k5jUi" style="background: #007cba; color: white; padding: 15px 25px; text-decoration: none; border-radius: 5px; margin: 10px;">Open Survey</a><br><br>
            <small style="color: #666;">Survey Link: https://cornell.ca1.qualtrics.com/jfe/form/SV_5cqnAHFvK4k5jUi</small>`;
        
        document.getElementById('message').innerHTML = instructions;
    </script>
</div>
```
